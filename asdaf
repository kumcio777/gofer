from kivy.app import App
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.button import Button
from kivy.uix.label import Label
from kivy.uix.widget import Widget
from kivy.graphics import Color, Rectangle
from kivy.metrics import dp
from kivy.clock import Clock
from phue import Bridge

class LampControlApp(App):
    def build(self):
        self.bridge = Bridge('95.49.57.121')  # Zastąp tym adresem IP swoim adresem mostka

        layout = BoxLayout(orientation='vertical')

        # Tło
        background = Widget()
        with background.canvas.before:
            Color(0.2, 0, 0, 1)  # Ciemnoczerwone tło
            Rectangle(pos=background.pos, size=background.size)

        layout.add_widget(background)

        # Etykieta "loveSender"
        label_love_sender = Label(
            text="loveSender",
            color=(1, 1, 1, 1),
            font_size=dp(30),
            size_hint_y=None
        )
        layout.add_widget(label_love_sender)

        # Etykieta z licznikiem kliknięć
        self.licznik_klikniec = 0
        self.label_licznik = Label(
            text=f"Liczba kliknięć: {self.licznik_klikniec}",
            color=(1, 1, 1, 1),
            size_hint_y=None
        )
        layout.add_widget(self.label_licznik)

        # Przycisk "ZAWIADOM KAMIL"
        przycisk = Button(
            text="ZAWIADOM KAMIL",
            background_color=(0.8, 0, 0, 1),  # Jasnoczerwony kolor przycisku
            size_hint=(0.5, 0.1)  # Rozmiar przycisku
        )
        przycisk.bind(on_press=self.obsluz_klikniecie)
        layout.add_widget(przycisk)

        # Zmiana koloru tła całego okna
        with self.root.canvas.before:
            Color(0.2, 0, 0, 1)  # Ciemnoczerwone tło
            Rectangle(pos=self.root.pos, size=self.root.size)

        return layout

    def obsluz_klikniecie(self, instance):
        # reszta kodu bez zmian

if __name__ == "__main__":
    LampControlApp().run()
